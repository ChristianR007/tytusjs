<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    <h1 class="text-center mt-3">Software specification</h1>
    <hr>
    <div class="row">
        <div class="col-md-8 offset-md-2 mt-3">
            <h2 class="ml-3">Linear Regression</h2>
            <h3>Class Diagram</h3>    
        </div>
    </div> 
    <div class="mermaid text-center">
        classDiagram
        LinearModel <|-- LinearRegression
        class LinearModel {
            +isFit : bool = false
        }
        class LinearRegression {
            +m : float = 0
            +b : float = 0
            +fit(xTrain : float[], yTrain : float[])
            +predict(xTest : float[]) float[]
            +mserror(yTrain : float[], yPredict : float[]) float
        }
    </div>
    <hr>
    <div class="row">
        <div class="col-md-8 offset-md-2 mt-3">
            <h2>Polynomial Regression</h2>
            <h3>Class diagram</h3>    
        </div>
    </div>
    
    <div class="mermaid text-center">
        classDiagram
        PolynomialModel <|-- PolynomialRegression
        class PolynomialModel {
            +isFit : bool = false
        }
        class PolynomialRegression {
            +solutions :[]
            +error :float
            +fit(xArray: float[], yArray: float[], degree: int)
            +predict(xArray: float[])
            +calculateR2(xArray: float[], yArray: float[])
            +getError()
        }
    </div>
    
    <div class="row">
        <div class="col-md-8 offset-md-2 mt-3">
            <h3>Methods and attributes description</h3>
            <table class="table table-striped table-bordered table-responsive">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Method or Atribute</th>
                    <th scope="col">Scope</th>
                    <th scope="col">Description</th>
                </tr>
            </thead>
            <tbody>
              <tr>
                <th>1</th>
                <td>isFit</td>
                <td>PolynomialModel Class</td>
                <td>Attribute that defines if the model is already trained or not</td>
            </tr>
            <tr>
                <th>2</th>
                <td>solutions</td>
                <td>PolynomialRegression Class</td>
                <td>Array of floats that stores the solutions for the polynomial model</td>
            </tr>
            <tr>
                <th>3</th>
                <td>fit</td>
                <td>PolynomialRegression Class</td>
                <td>This method creates the solutions for the polynomial model based in the logic that will be described below</td>
            </tr>
            <tr>
                <th>4</th>
                <td>xArray</td>
                <td>Method fit - PolynomialModel Class</td>
                <td>Array parameter of x values that are used to train the model</td>
            </tr>
            <tr>
                <th>5</th>
                <td>yArray</td>
                <td>Method fit - PolynomialRegression Class</td>
                <td>Array parameter of y values that are used to train the model</td>
            </tr>
            <tr>
                <th>6</th>
                <td>degree</td>
                <td>Method fit - PolynomialRegression Class</td>
                <td>Paramter with the desired degree for the model</td>
            </tr>
            <tr>
              <th>7</th>
              <td>equationSize</td>
              <td>Method fit - PolynomialRegression Class</td>
              <td>Attribute that defines the number of equations that are going to be used in the model based in the degree of the model</td>
          </tr>
          <tr>
              <th>8</th>
              <td>nElements</td>
              <td>Method fit - PolynomialRegression Class</td>
              <td>Attribute that defines the number columns that are going to be used in the matrix for the model</td>
          </tr>
          <tr>
            <th>9</th>
            <td>equations</td>
            <td>Method fit - PolynomialRegression Class</td>
            <td>Matrix that stores the equations and solutions for the polynomial model</td>
        </tr>
        <tr>
            <th>10</th>
            <td>predict</td>
            <td>PolynomialRegression Class</td>
            <td>Function that returns the predicted values based on the traning done before by the model</td>
        </tr>
        <tr>
            <th>10</th>
            <td>xArray</td>
            <td>Method predict - PolynomialRegression Class</td>
            <td>Parameter with the x Array values to be predicted</td>
        </tr>
        <tr>
            <th>11</th>
            <td>yArray</td>
            <td>Method predict - PolynomialRegression Class</td>
            <td>Array with y values predicted by the model</td>
        </tr>
        <tr>
            <th>12</th>
            <td>calculateR2</td>
            <td>Method calculateR2 - PolynomialRegression Class</td>
            <td>Method that creates the r^2 error of the trained model</td>
        </tr>
        <tr>
            <th>13</th>
            <td>getError</td>
            <td>Method getError - PolynomialRegression Class</td>
            <td>Method that return the r^2 value for the trained model</td>
        </tr>
    </tbody>
</table>
</div>
</div>


<div class="row">
    <div class="col-2 mt-3">
    </div>
    <div class="col-8">
        <h2>Logic Used</h2>
        <p>
            In order to train the model to get an accurate prediction based in the input degree, it was used several math concepts to get a precise function for the model, in this library it was used the following concepts to develop the solution: 
        </p>
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <ul class="list-group">
                    <li class="list-group-item">Least Squares</li>
                    <li class="list-group-item">Gauss Jordan</li>
                </ul>
            </div>
        </div>
        <h3>Least Squares</h3>
        <p>
            This method was used to build a coefficent matrix for the equation system solution, this matrix is simetric and it is created based in an input degree that we call "m", the logic of least squares is pretty simple, it just consist in creating a matrix that contains a group of equations that increase their degree as we create new equations in the matrix, this matrix is later solved to get the coefficents for the solution of the Regression Model.
        </p>
        <div class="text-center">
            <table class="table table-striped table-bordered table-responsive">
                <tr>
                    <td>n</td>
                    <td>Σx</td>
                    <td>Σx^2</td>
                    <td>Σx^3</td>
                    <td>...</td>
                    <td>Σx^m</td>
                    <td>Σy</td>
                </tr>
                <tr>
                    <td>Σx</td>
                    <td>Σx^2</td>
                    <td>Σx^3</td>
                    <td>Σx^4</td>
                    <td>...</td>
                    <td>Σx^m</td>
                    <td>Σxy</td>
                </tr>
                <tr>
                    <td>Σx^2</td>
                    <td>Σx^3</td>
                    <td>Σx^4</td>
                    <td>Σx^5</td>
                    <td>...</td>
                    <td>Σx^m</td>
                    <td>Σx^2*y</td>
                </tr>
                <tr>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                </tr>
                <tr>
                    <td>Σx^m</td>
                    <td>Σx^m+1</td>
                    <td>Σx^m+2</td>
                    <td>Σx^m+3</td>
                    <td>...</td>
                    <td>Σx^m+n</td>
                    <td>Σx^m*y</td>
                </tr>
            </table>
        </div>
        <h3>Gauss Jordan</h3>
        <p>
            This method was used to build the solution for the model, once we have the equations matrix to be solved it was used Gauss Jordan to get the coefficent of the equations to be later stored in the array of solutions.
        </p>
        <div class="text-center">
            <table class="table table-striped table-bordered table-responsive">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>...</td>
                    <td>n</td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>...</td>
                    <td>n</td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                    <td>2</td>
                    <td>...</td>
                    <td>n</td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>...</td>
                    <td>n</td>
                    <td>m</td>
                </tr>
            </table>
        </div>
        <h2>Usage</h2>
        <p>The usage of the PolynomialRegression Library is pretty simple you just have to follow the next steps</p>
        <h4>Import the library</h4>
        <p>In order to use the library you must import it into your html code, you can find the library in the dist folder as PolynomialRegression.js file</p>
        <h4>Training data</h4>
        <p>After importing the library into your html code you need to train the model. In order to train your model you must create 2 training array data that will be used when instanciating the library</p>
        <h4>Training the model</h4>
        <p>In orther to train the model you must create an instance of the PolynomialRegression library, then you must call the method fit, in this method you will send the xArray and yArray of training data followed by the degree of training for the model</p>
        <h4>Prediction</h4>
        <p>To create a prediction you must create an array of x values to be predicted, to create the prediction you only have to call the function precit and then you send the values to predict to the function</p>
    </div>
    <div class="col-2">
    </div>
</div>

<div class="row">
    <div>
        <h1 class="display-3 w-100 text-center">KMeans - Linear and 2D Data</h1>
        <hr>
        <div class="container">
            <h1 class="display-5 w-100">Class Diagram</h1>
        </div>  
    </div>
</div> 
<div class="mermaid text-center">
    classDiagram
    KMeans<|-- LinearKMeans
    KMeans<|-- _2DKMeans
    class KMeans {
        +k : int = 3
    }
    class LinearKMeans {
        +data : int[] = []
        +clusterize(k : int, data : int[], iterations : int )  any[]
        +distance(point_a : int, point_b : int)  int
        +calculateMeanVariance(arr : int)   any[]
    }
    class _2DKMeans {
        +data : any[] = []
        +clusterize(k : int, data : any[], iterations : int )  any[]
        +distance(point_a : any[], point_b : any[])  int
        +calculateMeanVariance(arr : int)   any[]
    }
</div>
<div class="container mt-4">
    <h3 class="display-5">LinearKMeans Class</h3>
    <div class="dropdown-divider"></div>

    <div class="row">
        <div>
            <h3 class="">Properties</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>k</td>
                        <td>Number of clusters in wich the points will be grouped.</td>
                    </tr>
                    <tr>
                        <td>data</td>
                        <td>Array of numbers representing each point on the X axis.</td>
                    </tr>
                    <tr>
                        <td>iterations</td>
                        <td>Amount of repetitions that the algorithm will perform. The iterations apply specifically to the randomization of possible cluster points.</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col">
            <h3 class="">Methods</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col" style="width: 10%;">Name</th>
                        <th scope="col"  style="width: 20%;">Parameters</th> 
                        <th scope="col"  style="width: 70%;">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>clusterize</td>
                        <td>
                            <ul>
                                <li>k</li>
                                <li>data</li>
                                <li>iterations</li>
                            </ul>
                        </td>
                        <td>This is the main method of the KMeans algorithm, which follows the following steps:
                            <ol>
                                <li><b>k</b> ammount of random points are selected from the <b>data</b> array without repetition. This are the potential clusters. </li>
                                <li>The distance between each point on the <b>data</b> array and each potential cluster is calculated and stored in the same array.</li>
                                <li>Each point gets assigned to the closest (less distance) potential cluster point. </li>
                                <li>The mean and variance of each cluster group is calculated and stored.</li>
                                <li>The points are reasigned to the potential clusters but this time the distance is calculated between the point and the cluster group mean. This step is repeated untill there are no more changes in the cluster groups. </li>
                                <li>The sum of each group variance (total variance) of the potential cluster is stored.</li>
                                <li>Steps 1 through 6 are repeated <b>iterations</b> times </li>
                                <li>The potential cluster who has the lesser total variance is selected as the optimal solution, and send as the returned value.</li>
                            </ol>
                        </td>
                    </tr>
                    <tr>
                        <td>distance</td>
                        <td>
                            <ul>
                                <li>point_a</li>
                                <li>point_b</li>
                            </ul>
                        </td>
                        <td>This method returns the distance between two points (<b>point_b</b> - <b>point_a</b>)

                        </td>
                    </tr>
                    <tr>
                        <td>calculateMeanVariance</td>
                        <td>
                            <ul>
                                <li>arr</li>
                            </ul>
                        </td>
                        <td>This method returns the mean and variance of an array of values.
                           The mean of <b>arr</b> is the sum of all the data divided by the item count.
                           The variance of <b>arr</b> is the sum of the substraction of each point and the mean, to the power of 2, divided by de item count.

                       </td>
                   </tr>
               </tbody>
           </table>
       </div>

   </div>


</div>
<div class="container mt-4">
    <div class="row">

        <div class="col col-sm-12 col-md-6">
            <h3 class="display-6">Example Data <br /></h3>
            <p class="bg-dark p-5 text-muted" style="border-radius: 10px;">
                <code class="text-info">
                    data = [<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;-99,
                    &nbsp;-92,
                    &nbsp;-89,
                    &nbsp;-87,
                    &nbsp;-83,
                    &nbsp;-82,
                    &nbsp;-78,<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;-76,
                    &nbsp;-70,
                    &nbsp;-62,
                    &nbsp;-57,
                    &nbsp;-55,
                    &nbsp;-50,
                    &nbsp;-42,<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;-35,
                    &nbsp;-33,
                    &nbsp;-32,
                    &nbsp;-30,
                    &nbsp;-27,
                    &nbsp;-17,
                    &nbsp;-12,<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;-10,
                    &nbsp;0,
                    &nbsp;1,
                    &nbsp;2,
                    &nbsp;25,
                    &nbsp;29,
                    &nbsp;33,
                    &nbsp;39,<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;41,
                    &nbsp;53,
                    &nbsp;54,
                    &nbsp;67
                    ]<br />
                    k = 3 <br/>
                    iterations = 3 <br/>
                </code>

            </p>
        </div>
        
        <div class="col col-sm-12 col-md-6">
            <h3 class="display-6">Result of Linear KMeans clustering:<br /></h3>
            <p>
                The result is showed on a graphic, each point has a color wich identifies the cluster group it is assigned to. The cluster points are drawn as red dots.
                <br />
                <br />
            </p>
            <p class="bg-dark p-5 text-muted" style="border-radius: 10px;">
                <img src="https://i.imgur.com/LESPQ9p.png" style="text-center" width="100%" />
            </p>
        </div>
    </div>

    <div class="container mt-4">
        <h3 class="display-5">_2DKMeans Class</h3>
        <div class="dropdown-divider"></div>

        <div class="row">
            <div>
                <h3 class="">Properties</h3>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>k</td>
                            <td>Number of clusters in wich the points will be grouped.</td>
                        </tr>
                        <tr>
                            <td>data</td>
                            <td>Array of coordinates [x,y] representing each point.</td>
                        </tr>
                        <tr>
                            <td>iterations</td>
                            <td>Amount of repetitions that the algorithm will perform. The iterations apply specifically to the randomization of possible cluster points.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col">
                <h3 class="">Methods</h3>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 10%;">Name</th>
                            <th scope="col"  style="width: 20%;">Parameters</th> 
                            <th scope="col"  style="width: 70%;">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>clusterize</td>
                            <td>
                                <ul>
                                    <li>k</li>
                                    <li>data</li>
                                    <li>iterations</li>
                                </ul>
                            </td>
                            <td>This is the main method of the KMeans algorithm, which follows the following steps:
                                <ol>
                                    <li><b>k</b> ammount of random points are selected from the <b>data</b> array without repetition. This are the potential clusters. </li>
                                    <li>The distance between each point on the <b>data</b> array and each potential cluster is calculated and stored in the same array.</li>
                                    <li>Each point gets assigned to the closest (less distance) potential cluster point. </li>
                                    <li>The mean and variance of each cluster group is calculated and stored.</li>
                                    <li>The points are reasigned to the potential clusters but this time the distance is calculated between the point and the cluster group mean. This step is repeated untill there are no more changes in the cluster groups. </li>
                                    <li>The sum of each group variance (total variance) of the potential cluster is stored.</li>
                                    <li>Steps 1 through 6 are repeated <b>iterations</b> times </li>
                                    <li>The potential cluster who has the lesser total variance is selected as the optimal solution, and send as the returned value.</li>
                                </ol>
                            </td>
                        </tr>
                        <tr>
                            <td>distance</td>
                            <td>
                                <ul>
                                    <li>point_a</li>
                                    <li>point_b</li>
                                </ul>
                            </td>
                            <td>This method returns the distance between two points 
                            </td>
                        </tr>
                        <tr>
                            <td>calculateMeanVariance</td>
                            <td>
                                <ul>
                                    <li>arr</li>
                                </ul>
                            </td>
                            <td>This method returns the mean and variance of an array of values.
                               The mean of <b>arr</b> is the sum of all the data divided by the item count.
                               The variance of <b>arr</b> is the sum of the substraction of each point and the mean, to the power of 2, divided by de item count.

                           </td>
                       </tr>
                   </tbody>
               </table>
           </div>

       </div>


   </div>
   <div class="container mt-4">
    <div class="row">

        <div class="col col-sm-12 col-md-6">
            <h3 class="display-6">Example Data <br /></h3>
            <p class="bg-dark p-5 text-muted" style="border-radius: 10px;">
                <code class="text-info">
                    data = [<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;[11,6],
                    &nbsp;[4,2],
                    &nbsp;[15,0],
                    &nbsp;[10,6],
                    &nbsp;[7,8],<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;[9,12],
                    &nbsp;[13,0],
                    &nbsp;[5,1],
                    &nbsp;[0,13],
                    &nbsp;[7,5],<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;[6,1],
                    &nbsp;[3,6],
                    &nbsp;[0,10],
                    &nbsp;[14,10],
                    &nbsp;[6,14],<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;[6,4],
                    &nbsp;[4,9],
                    &nbsp;[5,14],
                    &nbsp;[9,9],
                    &nbsp;[13,8]
                    ]<br />
                    k = 3 <br/>
                    iterations = 10 <br/>
                </code>

            </p>
        </div>

        <div class="col col-sm-12 col-md-6">
            <h3 class="display-6">Result of Linear KMeans clustering:<br /></h3>
            <p>
                The result is showed on a graphic, each point has a color wich identifies the cluster group it is assigned to. The cluster points are drawn as red dots.
                <br />
                <br />
            </p>
            <p class="bg-dark p-5 text-muted" style="border-radius: 10px;">
                <img src="https://i.imgur.com/AWPYm1Z.png" style="text-center" width="100%" />
            </p>
        </div>
    </div>



</div>
</div>

<hr>


<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>